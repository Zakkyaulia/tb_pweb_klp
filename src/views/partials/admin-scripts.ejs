<script>
    // Fungsi ini dipanggil oleh atribut `onclick` di navbar.ejs untuk toggle submenu
    function toggleSubmenu(header) {
        const submenu = header.parentElement;
        const submenuList = submenu.querySelector('.submenu-list');
        const chevron = header.querySelector('i.fa-chevron-down');

        submenu.classList.toggle('active');

        if (submenu.classList.contains('active')) {
            submenuList.style.maxHeight = submenuList.scrollHeight + 'px';
            chevron.style.transform = 'rotate(180deg)';
        } else {
            submenuList.style.maxHeight = '0';
            chevron.style.transform = 'rotate(0deg)';
        }
    }

    // Fungsi ini berjalan saat halaman dimuat untuk memberi highlight dan membuka menu yang aktif
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-menu a.nav-link, .nav-menu a.submenu-link');

        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');

                // Jika link yang aktif ada di dalam submenu, buka submenu tersebut
                const parentSubmenu = link.closest('.nav-submenu');
                if (parentSubmenu) {
                    const header = parentSubmenu.querySelector('.submenu-header');
                    if (header && !parentSubmenu.classList.contains('active')) {
                        toggleSubmenu(header);
                    }
                }
            }
        });
    });
</script> 